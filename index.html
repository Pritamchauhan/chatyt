<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NotAi-Pritam | AI Notes Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --neon-cyan: #00f2ff; --neon-purple: #bc13fe; }
        body { background: #050505; color: #eee; font-family: 'Segoe UI', sans-serif; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; }
        .neon-btn { background: linear-gradient(90deg, var(--neon-cyan), var(--neon-purple)); transition: 0.3s; color: black; font-weight: bold; }
        .neon-btn:hover { box-shadow: 0 0 20px rgba(0, 242, 255, 0.5); transform: translateY(-2px); }
        .api-panel { border-top: 2px solid var(--neon-purple); background: #0a0a0a; transition: all 0.5s ease; }
        .notes-content h1 { color: var(--neon-cyan); font-size: 24px; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 5px;}
        .notes-content h2 { color: var(--neon-purple); font-size: 20px; margin-top: 20px; }
        .example-card { border-left: 5px solid var(--neon-cyan); background: rgba(0, 242, 255, 0.05); padding: 15px; margin: 15px 0; border-radius: 0 10px 10px 0; }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-6xl mx-auto">
        <div class="flex justify-between items-center mb-10">
            <h1 class="text-4xl font-black tracking-tighter" style="background: linear-gradient(to right, #00f2ff, #bc13fe); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                NotAi-Pritam
            </h1>
            <button onclick="toggleApiBox()" class="text-xs text-gray-500 hover:text-white border border-gray-700 px-3 py-1 rounded-full">
                ‚öôÔ∏è Setup API
            </button>
        </div>

        <div id="apiBox" class="hidden glass p-6 mb-8 api-panel">
            <h3 class="text-sm font-bold text-purple-400 mb-4 uppercase tracking-widest">Connect Your AI (API Settings)</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" id="apiEndpoint" placeholder="Enter API Endpoint (e.g. OpenAI/Gemini URL)" class="bg-black border border-gray-800 p-3 rounded-lg text-sm focus:outline-none focus:border-cyan-400">
                <input type="password" id="apiKey" placeholder="Enter API Secret Key" class="bg-black border border-gray-800 p-3 rounded-lg text-sm focus:outline-none focus:border-cyan-400">
            </div>
            <p class="text-[10px] text-gray-500 mt-2">* Your keys are saved locally in your browser for security.</p>
        </div>

        <div class="glass p-8 mb-10">
            <div class="flex flex-col md:flex-row gap-4">
                <select id="lang" class="bg-black text-white p-4 rounded-xl border border-gray-800 focus:outline-none">
                    <option value="English">English</option>
                    <option value="Hindi">Hindi</option>
                    <option value="Hinglish">Hinglish</option>
                </select>
                <input type="text" id="videoUrl" placeholder="Paste YouTube Link (e.g., https://youtu.be/...)" class="flex-1 bg-black/40 border border-gray-800 p-4 rounded-xl focus:outline-none focus:border-purple-500">
                <button onclick="startProcessing()" class="neon-btn px-10 py-4 rounded-xl">GENERATE NOTES</button>
            </div>
        </div>

        <div id="resultArea" class="hidden grid grid-cols-1 lg:grid-cols-5 gap-8">
            <div class="lg:col-span-2 space-y-6">
                <div id="player" class="glass aspect-video overflow-hidden shadow-2xl"></div>
                
                <div class="glass p-6">
                    <h4 class="text-cyan-400 font-bold mb-3">Ask Doubt</h4>
                    <textarea id="chatInput" rows="2" class="w-full bg-black/50 border border-gray-800 rounded-lg p-3 text-sm focus:outline-none" placeholder="Ask anything about the video..."></textarea>
                    <button class="mt-2 w-full bg-gray-800 hover:bg-gray-700 py-2 rounded text-xs uppercase font-bold tracking-widest">Submit Question</button>
                </div>
            </div>

            <div class="lg:col-span-3">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-gray-400 text-sm">Target Language: <b id="displayLang" class="text-white"></b></span>
                    <div class="flex gap-2">
                        <button onclick="exportPDF()" class="bg-red-900/30 text-red-400 border border-red-900 px-4 py-1 rounded text-xs hover:bg-red-600 hover:text-white transition">Export PDF</button>
                        <button onclick="exportJPG()" class="bg-blue-900/30 text-blue-400 border border-blue-900 px-4 py-1 rounded text-xs hover:bg-blue-600 hover:text-white transition">Save JPG</button>
                    </div>
                </div>
                
                <div id="printableNotes" class="glass p-10 min-h-[600px] notes-content">
                    <div id="loader" class="flex flex-col items-center justify-center h-full py-20">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mb-4"></div>
                        <p class="text-cyan-400 animate-pulse">AI is watching & writing notes...</p>
                    </div>
                    <div id="notesContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleApiBox() { document.getElementById('apiBox').classList.toggle('hidden'); }

        function extractID(url) {
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
            return url.match(regex) ? url.match(regex)[1] : null;
        }

        async function startProcessing() {
            const url = document.getElementById('videoUrl').value;
            const lang = document.getElementById('lang').value;
            const vid = extractID(url);

            if(!vid) return alert("Bhai, sahi YouTube URL toh daalo!");

            document.getElementById('resultArea').classList.remove('hidden');
            document.getElementById('displayLang').innerText = lang;
            document.getElementById('player').innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${vid}" frameborder="0" allowfullscreen></iframe>`;
            
            // Auto Scroll to Results
            window.scrollTo({ top: document.getElementById('resultArea').offsetTop - 50, behavior: 'smooth' });

            // Simulating API Call
            setTimeout(() => {
                renderNotes(lang);
            }, 3000);
        }

        function renderNotes(lang) {
            document.getElementById('loader').classList.add('hidden');
            const container = document.getElementById('notesContainer');
            
            // Yeh wo format hai jo aapka AI return karega
            container.innerHTML = `
                <h1>üöÄ Video Detailed Summary (${lang})</h1>
                <p>This video provides an in-depth analysis of the subject. Our AI has broken down the complex topics into easy-to-read sections.</p>
                
                <h2>1. Core Architecture</h2>
                <ul>
                    <li>Primary Focus: Performance Optimization</li>
                    <li>Scalability: Cloud-native approach</li>
                    <li>Security: End-to-end encryption layers</li>
                </ul>

                <div class="example-card">
                    <p><strong>üí° Practical Example:</strong> Imagine you are sending a secret letter. This technology is like the invisible ink that only the receiver can read using a special UV light.</p>
                </div>

                <h2>2. Implementation Steps</h2>
                <p>To implement this, you need to follow the 3-step validation rule mentioned at 04:20 in the video.</p>
            `;
        }

        async function exportPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'pt', 'a4');
            const content = document.getElementById('printableNotes');
            
            // Simple colorful PDF generation
            await doc.html(content, {
                callback: function(d) { d.save('NotAi-Pritam-Notes.pdf'); },
                x: 30, y: 30, width: 530, windowWidth: 800
            });
        }

        function exportJPG() {
            const content = document.getElementById('printableNotes');
            html2canvas(content, {backgroundColor: '#050505'}).then(canvas => {
                const link = document.createElement('a');
                link.download = 'NotAi-Pritam-Expert-Notes.jpg';
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>
</body>
</html>
